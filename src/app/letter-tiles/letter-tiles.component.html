<div class="container game-container noselect">
  <div
    id="letter-bank"
    class="ab-center letter-bank m-lr-auto"
    cdkDropList
    #letterbank="cdkDropList"
    cdkDropListOrientation="mixed"
    [cdkDropListData]="bankLetters"
    [cdkDropListConnectedTo]="gridCellIds"
    (cdkDropListDropped)="drop($event)"
  >
    @for (letter of bankLetters; track $index) {
    <div class="tile-wrapper" cdkDrag>
      <div class="letter m-lr-auto">
        {{ letter }}
      </div>
    </div>
    }
    <button
      *ngIf="!isGameStarted"
      (click)="startRandomPuzzle()"
      class="btn btn-primary m-auto"
      style="max-height: 40px; min-width: 130px"
    >
      Start
    </button>
  </div>
</div>

<div #gridWrapper class="grid-wrapper">
  <div class="fade-out-edges m-lr-auto">
    <div
      #gridContainer
      class="grid-container"
      [cdkDragFreeDragPosition]="dragPosition"
      cdkDrag
      cdkDragBoundary=".grid-boundary"
    >
      @for (row of grid; track $index; let i = $index) {
      <div class="grid-row">
        @for (cell of row; track $index; let j = $index) {
        <div
          [ngClass]="{ 'valid-letter': validLetterIndices[i][j] }"
          class="grid-cell"
          cdkDropList
          [id]="'cell-' + i + '-' + j"
          [cdkDropListData]="[cell]"
          [cdkDropListConnectedTo]="allDropListIds"
          [cdkDropListEnterPredicate]="canEnter"
          (cdkDropListDropped)="drop($event)"
        >
          @if (cell) {
          <div
            class="letter-tile"
            cdkDrag
            (cdkDragStarted)="dragStarted($event)"
          >
            {{ cell }}
          </div>
          }
        </div>
        }
      </div>
      }
    </div>
  </div>
</div>
<div class="lower-menu m-lr-auto">
  <app-timer
    [ngClass]="{ hidden: !isGameStarted }"
    [isRunning]="timerRunning"
    (timeChanged)="onTimeChanged($event)"
  >
  </app-timer>
  <i
    class="material-icons refresh"
    (click)="startPuzzle()"
    [ngClass]="{ disabled: !anyTilePlaced(), hidden: !isGameStarted }"
    >refresh</i
  >
</div>
